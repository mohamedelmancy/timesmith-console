<div class="container-fluid">
  <div class="row">
    <div class="col-sm-12 d-flex p-0">
      <div *ngIf="sideFilters?.length && !isMobile" class="side-filters-container">
        <app-side-filter (emittedData)="sideFilter($event)" [pawStatistics]="pawStatistics"
                         [sideFilters]="sideFilters"></app-side-filter>
      </div>
      <div class="mat-elevation-z8 py-3 w-100" [ngClass]="{'table-with-filters': sideFilters?.length && !isMobile}">
        <table #table id="htmlData" mat-table [dataSource]="dataSource">
          <ng-container *ngFor="let column of displayedColumns?.values; let i = index" [matColumnDef]="column">

            <div *ngIf="column === 'actions'">
              <th mat-header-cell *matHeaderCellDef>
                <span class="column-label">{{'' | translate}}</span>
              </th>

              <td mat-cell *matCellDef="let row; let i = index" style="width: 10px; flex: none; min-width: 10px">
                <div class="d-flex">
                  <a class="cursor-pointer mx-1" (click)="takeAction('Update', row)">{{'Edit' | translate}}</a> |
                  <a class="cursor-pointer mx-1" (click)="takeAction('Delete', row)">{{'Delete' | translate}}</a>
                </div>
              </td>
            </div>

            <div *ngIf="column === 'view'">
              <th mat-header-cell *matHeaderCellDef>
                <span class="column-label">{{'' | translate}}</span>
              </th>

              <td mat-cell *matCellDef="let row; let i = index" style="width: 10px; flex: none; min-width: 10px">
                <div class="d-flex">
                  <a class="cursor-pointer mx-1" (click)="takeAction('View', row)">{{'View' | translate}}</a>
                </div>
              </td>
            </div>

            <div *ngIf="column === 'statusActions'">
              <th mat-header-cell *matHeaderCellDef>
                <span class="column-label">{{'' | translate}}</span>
              </th>

              <td mat-cell *matCellDef="let row; let i = index" style="width: 10px; flex: none; min-width: 10px">
                <div class="d-flex">
                  <a class="cursor-pointer mx-1 text-success text-truncate"
                     (click)="takeAction('approve', row)">{{'Approve' | translate}}</a> |
                  <a class="cursor-pointer mx-1 text-danger text-truncate"
                     (click)="takeAction('deny', row)">{{'Deny' | translate}}</a>
                </div>
              </td>
            </div>

            <div *ngIf="column === 'status'">
              <th mat-header-cell *matHeaderCellDef>
                <span class="column-label">{{'Status' | translate}}</span>
                <div style="width: 100%" *ngIf="showSearch">
                  <input (keydown.space)="$event.stopPropagation()" (click)="$event.stopPropagation()" matInput
                         placeholder="{{'Search' | translate}}" (keyup)="applyFilter($event, column)">
                </div>
              </th>
              <td mat-cell *matCellDef="let row; let i = index">
                <div class="">
                  <a class="primary-text status-text"
                     [ngClass]="row[column] === 'Approved' ? 'bg-success text-white' : 'bg-warning text-dark'">{{row[column]}}</a>
                </div>
              </td>
            </div>

            <div *ngIf="column === 'weekends'">
              <th mat-header-cell *matHeaderCellDef>
                <span class="column-label">{{'Weekends' | translate}}</span>
                <div style="width: 100%" *ngIf="showSearch">
                  <input (keydown.space)="$event.stopPropagation()" (click)="$event.stopPropagation()" matInput
                         placeholder="{{'Search' | translate}}" (keyup)="applyFilter($event, column)">
                </div>
              </th>
              <td mat-cell *matCellDef="let row; let i = index">
                <div class="">
                  <a *ngFor="let day of row[column]; let index = index"
                     class="mx-1">{{day.name.slice(0, 3)}} {{(index === row[column]?.length - 1) ? '' : ','}}</a>
                </div>
              </td>
            </div>

            <div *ngIf="column === 'symbol'">
              <th mat-header-cell *matHeaderCellDef>
                <span class="column-label">{{'Symbol' | translate}}</span>
              </th>
              <td mat-cell *matCellDef="let row; let i = index">
                <div class="">
                  <span style="font-size: 30px; color: #000" tooltip="{{row?.code}}" class="{{row[column].symbol_name}}"></span>
                </div>
              </td>
            </div>

            <div *ngIf="column === 'default permissions'">
              <th mat-header-cell *matHeaderCellDef>
                <span class="column-label">{{'Default permissions' | translate}}</span>
              </th>
              <td mat-cell *matCellDef="let row; let i = index" style="width: 10px; flex: none; min-width: 10px">
                <div class="">
                  <a class="cursor-pointer mx-1" (click)="takeAction('View', row)">{{'View' | translate}}</a>
                </div>
              </td>
            </div>


            <div *ngIf="column === 'color'">
              <th mat-header-cell *matHeaderCellDef>
                <span class="column-label">{{'Color' | translate}}</span>
                <div style="width: 100%" *ngIf="showSearch">
                  <input (keydown.space)="$event.stopPropagation()" (click)="$event.stopPropagation()" matInput
                         placeholder="{{'Search' | translate}}" (keyup)="applyFilter($event, column)">
                </div>
              </th>

              <td mat-cell *matCellDef="let row; let i = index">
                <div>
                  <input class="w-25" readonly disabled matInput type="color" [value]="row[column]">
                </div>
              </td>
            </div>

            <div *ngIf="column === 'individuals'">
              <th mat-header-cell *matHeaderCellDef>
                <span class="column-label">{{'Individuals' | translate}}</span>
                <div style="width: 100%" *ngIf="showSearch">
                  <input (keydown.space)="$event.stopPropagation()" (click)="$event.stopPropagation()" matInput
                         placeholder="{{'Search' | translate}}" (keyup)="applyFilter($event, column)">
                </div>
              </th>

              <td mat-cell *matCellDef="let row; let i = index">
                <div>
                  <a class="primary-text cursor-pointer" [routerLink]="['/team']" [queryParams]="{id: row.id}"
                     [fragment]="dataTableName">{{row[column]}}</a>
                </div>
              </td>
            </div>

            <th mat-header-cell *matHeaderCellDef>
              <span class="column-label">{{displayedColumns?.labels[i] | translate}}</span>
              <div style="width: 100%" *ngIf="showSearch">
                <input (keydown.space)="$event.stopPropagation()" (click)="$event.stopPropagation()" matInput
                       placeholder="{{'Search' | translate}}" (keyup)="applyFilter($event, column)">
              </div>
            </th>
            <td tooltip="{{row[column]?.length > 15 ? row[column] : ''}}" mat-cell
                *matCellDef="let row"> {{row[column] === 0 ? '0' : row[column] || ' - ' | translate}} </td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumns?.values"></tr>
          <tr [ngClass]="{'animated-bg': row.animate}" mat-row
              *matRowDef="let row; columns: displayedColumns.values;"></tr>
          <!-- Row shown when there is no matching data. -->
          <tr class="mat-row" *matNoDataRow>
            <td class="mat-cell full-wid"
                [attr.colspan]="displayedColumns.values?.length">{{'No data available' | translate}}</td>
          </tr>
        </table>
        <mat-paginator [pageSize]="pageSize" [pageSizeOptions]="[3, 5, 10, 25, 100]"
                       aria-label="Select page of users"></mat-paginator>
      </div>
    </div>
  </div>
</div>
